const SEEDED_POSTS = [
  {
    id: 'seed-1',
    slug: 'best-remote-jobs-2025',
    title: '10 Best Remote Jobs to Apply for in 2025',
    excerpt: 'The remote job market is booming. Here are the highest-paying, most in-demand remote roles you should be targeting this year.',
    content: `
# 10 Best Remote Jobs to Apply for in 2025

The remote work revolution is here to stay. Companies worldwide are hiring remote talent at record rates â€” and salaries are higher than ever. Here are the 10 best remote roles to target in 2025.

## 1. Software Engineer ($120kâ€“$200k)
Software engineering remains the king of remote work. With skills in React, Python, or Go, you can work for any company in the world from anywhere. Demand is at an all-time high with AI tools making engineers even more productive.

## 2. Product Manager ($100kâ€“$180k)
Remote PMs are in massive demand. Companies need people who can align teams, write specs, and ship products â€” all async. Experience with Notion, Linear, and Figma is a huge advantage.

## 3. UX/UI Designer ($80kâ€“$150k)
Figma changed everything. Designers can now collaborate in real-time regardless of location. Companies are hiring senior designers who can own design systems and work independently.

## 4. Data Analyst ($70kâ€“$130k)
Every company wants data-driven decisions. Remote data analysts with SQL, Python, and Tableau skills are earning six figures working from anywhere.

## 5. DevOps Engineer ($110kâ€“$180k)
Cloud infrastructure doesn't care where you live. AWS, Kubernetes, and Terraform skills make you one of the most sought-after remote workers on the planet.

## 6. Content Strategist ($60kâ€“$120k)
As SEO and content marketing explode, companies need strategists who can plan, write, and measure content programs. Fully remote by nature.

## 7. Customer Success Manager ($70kâ€“$120k)
SaaS companies need CSMs to retain and grow accounts. Video calls and async communication make this role perfectly suited for remote work.

## 8. Growth Marketer ($80kâ€“$140k)
Performance marketing, SEO, and growth hacking are fully remote disciplines. If you can drive metrics, geography doesn't matter.

## 9. Technical Writer ($65kâ€“$110k)
AI tools need documentation. Developer platforms need guides. Technical writers who understand code are in massive demand.

## 10. AI/ML Engineer ($140kâ€“$250k+)
The hottest role of 2025. If you have machine learning skills, you can write your own ticket â€” remote, high pay, and insane demand.

## How to Land These Jobs

1. **Build a portfolio** â€” GitHub for devs, Notion for PMs, Dribbble for designers
2. **Optimize your LinkedIn** â€” remote recruiters search LinkedIn daily
3. **Apply on specialized boards** â€” use OpportuAI to find the best listings
4. **Nail async communication** â€” remote companies test your writing in interviews

Start browsing [remote jobs on OpportuAI](/jobs) today.
    `,
    category: 'Job Search Advice',
    author: 'OpportuAI Team',
    readTime: '5 min read',
    publishedAt: '2025-01-15',
    featured: true,
    emoji: 'ðŸ’¼'
  },
  {
    id: 'seed-2',
    slug: 'remote-work-setup-guide',
    title: 'The Ultimate Remote Work Setup Guide for 2025',
    excerpt: 'Your home office can make or break your productivity. Here is everything you need to build the perfect remote work setup.',
    content: `
# The Ultimate Remote Work Setup Guide for 2025

Working remotely is amazing â€” but only if your setup supports deep work. Here's everything you need to build a productive, comfortable, and professional home office in 2025.

## The Essentials

### 1. A Proper Desk and Chair
This is your single biggest investment. A bad chair causes back pain; bad posture kills productivity. Consider the **Autonomous SmartDesk** (standing desk, $400) and **Secretlab Titan** or **Herman Miller Aeron** for seating.

### 2. External Monitor
Your laptop screen is too small for serious work. A 27" 4K monitor like the **LG 27UK850-W** ($450) or **Dell UltraSharp U2723QE** ($580) transforms your workflow.

### 3. Mechanical Keyboard
The **Keychron K2** ($90) is the best value mechanical keyboard for remote workers. Tactile feedback, wireless, and works on Mac and Windows.

### 4. Webcam
The built-in laptop camera looks terrible on video calls. The **Logitech C920** ($70) is the gold standard â€” 1080p, great low-light performance.

### 5. Microphone
Audio quality matters more than video. The **Blue Yeti Nano** ($100) makes you sound professional on every call.

## Productivity Software Stack

- **Notion** â€” notes, projects, and documentation
- **Linear** â€” task and issue tracking
- **Loom** â€” async video messages instead of meetings
- **Slack** â€” team communication
- **Cal.com** â€” scheduling without the back-and-forth

## Internet & Power

- Get a **backup 4G/5G hotspot** for power outages or internet failures
- A **UPS (uninterruptible power supply)** prevents losing work during power cuts
- Target 100+ Mbps download speed for smooth video calls

## The Mindset

Your setup should enable **deep work** â€” long, uninterrupted focus sessions. Turn off notifications, use time-blocking, and set clear working hours.

Browse [SaaS tools for remote workers](/tools) to complete your stack.
    `,
    category: 'Remote Work Tips',
    author: 'OpportuAI Team',
    readTime: '6 min read',
    publishedAt: '2025-01-22',
    featured: true,
    emoji: 'ðŸ '
  },
  {
    id: 'seed-3',
    slug: 'best-saas-tools-remote-teams-2025',
    title: 'Best SaaS Tools for Remote Teams in 2025',
    excerpt: 'The right software stack can make your remote team feel like they are in the same room. Here are the top tools used by the best remote companies.',
    content: `
# Best SaaS Tools for Remote Teams in 2025

The best remote companies run on great software. Here are the tools used by top remote teams at companies like GitLab, Basecamp, and Automattic.

## Communication

### Slack ($7.25/user/month)
The standard for remote team messaging. Channels, threads, and 2,000+ integrations make it indispensable. The free tier works for small teams.

### Loom (Free / $12.50/month)
Replace pointless meetings with short video messages. Record your screen, face, or both â€” share a link. Async-first teams swear by Loom.

### Discord (Free)
Increasingly used by tech companies as a Slack alternative. Voice channels feel like a virtual office. Great for smaller teams.

## Project Management

### Linear ($8/user/month)
The fastest, most beautiful issue tracker ever built. If your team ships software, Linear is a game-changer. Keyboard-first, blazing fast.

### Notion ($8/user/month)
Your team's second brain. Wikis, docs, databases, and project tracking all in one. The most flexible tool on this list.

## Design & Collaboration

### Figma (Free / $12/month)
Real-time collaborative design. Designers, PMs, and engineers all work in the same file simultaneously. Revolutionary for remote design work.

### Miro ($8/user/month)
Virtual whiteboard for brainstorming and workshops. Sticky notes, flowcharts, and templates make remote collaboration visual.

## Development

### GitHub ($4/user/month)
The home for all your code. Pull requests, CI/CD, and code review workflows that work perfectly async.

### Vercel (Free / $20/month)
Deploy frontend apps with zero config. Perfect for remote dev teams who need fast, reliable deployments.

## Finance & HR

### Deel ($49+/month)
Hire and pay people anywhere in the world compliantly. Essential for truly global remote teams.

### Mercury (Free)
The best bank account for remote-first startups. Free business checking with a great API.

Browse our full [SaaS tools directory](/tools) with 50+ tools for remote workers.
    `,
    category: 'SaaS & Tools Reviews',
    author: 'OpportuAI Team',
    readTime: '7 min read',
    publishedAt: '2025-02-01',
    featured: true,
    emoji: 'ðŸ› ï¸'
  },
  {
    id: 'seed-4',
    slug: 'how-to-find-remote-job-no-experience',
    title: 'How to Land a Remote Job With No Experience',
    excerpt: 'No experience? No problem. Here is the step-by-step strategy to break into remote work even if you are starting from scratch.',
    content: `
# How to Land a Remote Job With No Experience

Breaking into remote work with no experience feels impossible â€” but thousands of people do it every month. Here is the exact strategy that works.

## Step 1: Pick a High-Demand Remote Skill

Choose ONE skill to learn. The fastest paths to a remote job:
- **Web development** â€” freeCodeCamp, The Odin Project (free)
- **UX Design** â€” Google UX Design Certificate on Coursera ($49/month)
- **Digital Marketing** â€” Google Digital Garage (free)
- **Copywriting** â€” Copy Hackers, Copyblogger (free resources)
- **Video Editing** â€” YouTube tutorials + practice

## Step 2: Build 3 Portfolio Projects

No job, no problem â€” build projects that prove your skills:
- Developers: build 3 real websites and push them to GitHub
- Designers: redesign 3 real apps in Figma
- Marketers: grow a Twitter/Instagram account from 0 to 1000 followers

## Step 3: Get Your First Client (Not a Job)

Before applying for jobs, get a freelance client. Charge low rates to get testimonials:
- Post on Reddit (r/forhire, r/slavelabour)
- Reach out to local small businesses
- Offer free work in exchange for a testimonial

## Step 4: Apply Strategically

Now apply for entry-level remote roles with your portfolio and testimonial:
- Apply to 5-10 companies per day
- Customize every cover letter
- Follow up after 5 days

## Step 5: Nail the Remote Interview

Remote companies test your async communication skills:
- Write clearly and concisely in all communication
- Be responsive and proactive
- Ask smart questions about their remote culture

Start browsing [entry-level remote jobs](/jobs) on OpportuAI now.
    `,
    category: 'Job Search Advice',
    author: 'OpportuAI Team',
    readTime: '5 min read',
    publishedAt: '2025-02-08',
    emoji: 'ðŸš€'
  },
  {
    id: 'seed-5',
    slug: 'notion-vs-obsidian-2025',
    title: 'Notion vs Obsidian in 2025: Which Should You Use?',
    excerpt: 'Two of the most popular productivity tools go head to head. We break down which one is right for you based on your workflow.',
    content: `
# Notion vs Obsidian in 2025: Which Should You Use?

Notion and Obsidian are both excellent knowledge management tools â€” but they serve very different purposes. Here's how to choose.

## Notion: The All-in-One Workspace

**Best for:** Teams, project management, shared wikis

Notion is a collaborative workspace where you can build databases, track projects, write docs, and manage teams. It's the Swiss Army knife of productivity tools.

**Pros:**
- Real-time collaboration with your team
- Powerful databases and relations
- Beautiful templates and design
- Web-based â€” works anywhere
- Great for project management

**Cons:**
- Requires internet connection
- Can be slow with large workspaces
- Your data lives on their servers
- Gets complex as you add more pages

**Pricing:** Free for personal use, $8/user/month for teams

## Obsidian: The Second Brain

**Best for:** Personal knowledge management, writers, researchers

Obsidian is a local-first markdown editor with bidirectional linking. It treats your notes like a personal Wikipedia â€” every note can link to every other note, creating a web of knowledge.

**Pros:**
- Works offline â€” files live on your computer
- Bidirectional links create a knowledge graph
- Extensible with 1000+ community plugins
- Lightning fast even with thousands of notes
- Privacy-first â€” your data, your device

**Cons:**
- No real-time collaboration
- Steeper learning curve
- Requires self-organization

**Pricing:** Free for personal use, $8/month for sync

## The Verdict

**Use Notion if:** You work with a team, manage projects, or need databases and structured information.

**Use Obsidian if:** You want to build a personal knowledge base, you write a lot, or you care deeply about data privacy and longevity.

**Use both:** Many power users use Notion for work/team projects and Obsidian for personal notes and research. This is the optimal setup.

Check out more [SaaS tools](/tools) to build your perfect productivity stack.
    `,
    category: 'SaaS & Tools Reviews',
    author: 'OpportuAI Team',
    readTime: '6 min read',
    publishedAt: '2025-02-14',
    emoji: 'âš”ï¸'
  },
  {
    id: 'seed-6',
    slug: 'remote-work-productivity-tips',
    title: '15 Remote Work Productivity Tips That Actually Work',
    excerpt: 'Working from home sounds dreamy until distractions, loneliness, and procrastination hit. Here are 15 tips from experienced remote workers.',
    content: `
# 15 Remote Work Productivity Tips That Actually Work

Remote work is the best â€” until it isn't. Distractions, isolation, and the blurring of work-life boundaries can destroy your productivity. Here are 15 tips that actually work.

## Time Management

**1. Time-block your calendar**
Assign every hour of your day to a task before the day starts. No empty calendar slots. Use Google Calendar or Notion.

**2. Do your hardest task first**
Eat the frog. Your best energy is in the morning â€” spend it on deep work, not email.

**3. Work in 90-minute blocks**
The human brain operates in 90-minute ultradian rhythms. Work for 90 minutes, take a 15-minute break. Repeat.

**4. Set a fake commute**
Walk around the block before starting work. This signals your brain that work mode has begun.

## Environment

**5. Have a dedicated workspace**
Never work from your bed. A separate desk â€” even in a corner of your room â€” creates mental separation.

**6. Get dressed every morning**
Sounds silly, but it works. Getting dressed signals your brain it's time to focus.

**7. Use background noise**
Coffitivity (cafe sounds), Brain.fm (focus music), or lo-fi hip hop help many people concentrate.

## Communication

**8. Over-communicate with your team**
Remote teams fail when people go silent. Post daily updates, share blockers early, and respond within hours.

**9. Default to async**
Before scheduling a call, ask: could this be a Loom video or a Slack message? Protect your focus time.

**10. Write everything down**
In remote teams, if it's not written, it didn't happen. Document decisions, meeting notes, and context.

## Wellbeing

**11. Take real breaks**
Step outside, eat lunch away from your desk, and end work at a fixed time.

**12. Exercise daily**
No commute means no built-in movement. Block 30 minutes for exercise â€” it's not optional.

**13. Socialize intentionally**
Schedule virtual coffee chats, join online communities, and work from cafes occasionally.

**14. Set hard stop times**
Remote work can become 24/7 work. Set an alarm for your end time and stick to it.

**15. Audit your tools quarterly**
Remove any tool that creates friction. Your software stack should feel effortless.

Browse [productivity tools](/tools) to supercharge your remote work setup.
    `,
    category: 'Remote Work Tips',
    author: 'OpportuAI Team',
    readTime: '7 min read',
    publishedAt: '2025-02-20',
    emoji: 'âš¡'
  },
  {
    id: 'seed-7',
    slug: 'best-ai-tools-remote-workers-2025',
    title: 'Best AI Tools for Remote Workers in 2025',
    excerpt: 'AI is changing how remote workers operate. Here are the best AI tools that will make you 10x more productive working from anywhere.',
    content: `
# Best AI Tools for Remote Workers in 2025

AI tools have fundamentally changed what one person can accomplish working remotely. Here are the best ones for 2025.

## Writing & Communication

### ChatGPT ($20/month)
The Swiss Army knife of AI. Drafts emails, summarizes documents, writes code, and answers complex questions. Start here if you haven't already.

### Claude ($20/month)
Anthropic's AI assistant. Better than ChatGPT for long documents, nuanced writing, and coding tasks. Highly recommended for remote workers who write a lot.

### Grammarly (Free / $12/month)
AI writing assistant that catches grammar errors and improves clarity. Works across every app you use.

## Meetings & Transcription

### Otter.ai (Free / $16/month)
Automatically transcribes your meetings in real-time. Generates summaries, highlights action items, and lets you search past meetings.

### Fireflies.ai (Free / $10/month)
Records and transcribes meetings across Zoom, Google Meet, and Teams. Integrates with your CRM automatically.

## Coding

### Cursor ($20/month)
The AI-first code editor that understands your entire codebase. Write features, fix bugs, and refactor code with natural language. Life-changing for developers.

### GitHub Copilot ($10/month)
AI pair programmer inside VS Code. Autocompletes code, suggests entire functions, and explains unfamiliar code.

## Design & Images

### Midjourney ($10/month)
Generate stunning images from text descriptions. Perfect for social media, presentations, and marketing materials.

### Canva AI (Free / $13/month)
Magic Write, text-to-image, background remover, and design suggestions powered by AI. Non-designers love this.

## Productivity

### Notion AI ($10/month add-on)
AI built into your Notion workspace. Summarize notes, generate content, extract action items, and auto-fill databases.

### Perplexity AI (Free / $20/month)
AI search engine with cited sources. Better than Google for research tasks that need up-to-date information.

Browse all [AI tools in our directory](/tools) to build your ultimate AI stack.
    `,
    category: 'SaaS & Tools Reviews',
    author: 'OpportuAI Team',
    readTime: '7 min read',
    publishedAt: '2025-02-25',
    featured: true,
    emoji: 'ðŸ¤–'
  },
  {
    id: 'seed-8',
    slug: 'negotiate-remote-job-salary',
    title: 'How to Negotiate Your Remote Job Salary (And Win)',
    excerpt: 'Most remote workers leave money on the table during salary negotiations. Here is the exact script and strategy to get paid what you deserve.',
    content: `
# How to Negotiate Your Remote Job Salary (And Win)

85% of people who negotiate their salary get more money. Yet most people never try. Here's exactly how to negotiate your remote job offer.

## Before You Negotiate

**Know your number**
Research salaries on Levels.fyi, Glassdoor, LinkedIn Salary, and Payscale. Your target should be in the top 25% of the range for your experience level.

**Never give the first number**
When asked "what are your salary expectations?" respond with: "I'd love to learn more about the role first. What's the budgeted range for this position?"

**Get the offer in writing first**
Never negotiate verbally without a written offer. Ask them to send the offer letter before you respond.

## The Negotiation Script

When you receive an offer, wait 24-48 hours, then respond:

*"Thank you so much for the offer â€” I'm really excited about this opportunity. Based on my research and experience, I was expecting something closer to [YOUR NUMBER]. Is there any flexibility there?"*

Then stop talking. Silence is your friend.

## What to Negotiate Beyond Salary

Remote jobs have more negotiables than in-person roles:

- **Equipment budget** â€” ask for $1,000-$2,000 for home office setup
- **Learning & development** â€” $500-$2,000/year for courses and conferences
- **Start date** â€” more time to prepare or finish current role
- **Equity** â€” stock options can be worth more than salary
- **PTO** â€” extra vacation days cost the company nothing

## If They Say No

"I understand. Can we revisit this after 90 days if I'm hitting my goals?"

This keeps the door open and gives you a clear path to a raise.

## Remote-Specific Leverage

Remote workers have unique leverage: location-independent companies compete globally for talent. If you have in-demand skills, you likely have multiple options. Use that.

Start finding better-paying remote opportunities on [OpportuAI](/jobs).
    `,
    category: 'Job Search Advice',
    author: 'OpportuAI Team',
    readTime: '5 min read',
    publishedAt: '2025-03-01',
    emoji: 'ðŸ’°'
  },
  {
    id: 'seed-9',
    slug: 'linear-vs-jira-remote-teams',
    title: 'Linear vs Jira: Which Is Better for Remote Teams in 2025?',
    excerpt: 'Jira has dominated project management for years. But Linear is taking over fast. Here is an honest comparison for remote engineering teams.',
    content: `
# Linear vs Jira: Which Is Better for Remote Teams in 2025?

If your team manages software projects, you're probably using Jira or considering Linear. Here's the honest comparison.

## Linear: Built for Speed

Linear launched in 2020 and immediately won the hearts of engineers everywhere. It's fast, opinionated, and beautifully designed.

**Pros:**
- Blazing fast â€” keyboard shortcuts for everything
- Beautiful, minimal interface that developers love
- Git integrations with GitHub, GitLab, and Bitbucket
- Automatic cycle tracking and velocity metrics
- Roadmap and project views built in
- Excellent mobile app

**Cons:**
- Less customizable than Jira
- No time tracking built in
- Smaller ecosystem of integrations
- Better for smaller teams (under 200)

**Pricing:** Free up to 250 issues, $8/user/month for teams

## Jira: The Enterprise Standard

Jira has been around since 2002 and powers engineering at most large companies. It's powerful, flexible, and deeply integrated.

**Pros:**
- Infinitely customizable workflows
- Massive ecosystem of plugins (3,000+)
- Enterprise-grade permissions and security
- Advanced reporting and dashboards
- Time tracking built in
- Scales to thousands of users

**Cons:**
- Slow and clunky interface
- Steep learning curve
- Overwhelming for small teams
- Expensive at scale

**Pricing:** Free up to 10 users, $7.75/user/month

## The Verdict for Remote Teams

**Choose Linear if:** You're a startup or scale-up (under 200 engineers), you value developer experience, and you want your team to actually enjoy using your project tracker.

**Choose Jira if:** You're at an enterprise, need deep customization, use Atlassian products, or have compliance requirements.

The trend is clear: new remote-first companies almost universally choose Linear. Established enterprises stick with Jira.

Browse more [productivity tools for remote teams](/tools).
    `,
    category: 'SaaS & Tools Reviews',
    author: 'OpportuAI Team',
    readTime: '6 min read',
    publishedAt: '2025-03-05',
    emoji: 'âš”ï¸'
  },
  {
    id: 'seed-10',
    slug: 'work-from-anywhere-countries-2025',
    title: 'Best Countries to Work Remotely From in 2025',
    excerpt: 'Digital nomad visas, low cost of living, and fast internet. Here are the best countries to work remotely from in 2025.',
    content: `
# Best Countries to Work Remotely From in 2025

Remote work unlocks the ultimate lifestyle upgrade: living in affordable, beautiful countries while earning a Western salary. Here are the best destinations for 2025.

## 1. Portugal ðŸ‡µðŸ‡¹
**Cost of living:** $1,800-$2,500/month
**Digital Nomad Visa:** Yes (D8 Visa)
**Internet:** Fast and reliable

Lisbon and Porto offer European quality of life at half the cost. Warm weather, English widely spoken, and a thriving expat community. The D8 digital nomad visa is easy to get for non-EU remote workers.

## 2. Thailand ðŸ‡¹ðŸ‡­
**Cost of living:** $1,000-$1,800/month
**Digital Nomad Visa:** LTR Visa (Long Term Resident)
**Internet:** Excellent in cities

Chiang Mai has been the digital nomad capital of Asia for a decade. Cheap food, fast internet, coworking spaces everywhere, and a massive expat community.

## 3. Mexico ðŸ‡²ðŸ‡½
**Cost of living:** $1,200-$2,000/month
**Digital Nomad Visa:** No (tourist visa works for 180 days)
**Internet:** Good in major cities

Mexico City, Playa del Carmen, and Oaxaca are booming nomad hubs. Close to US time zones, amazing food, and very affordable for North Americans.

## 4. Georgia ðŸ‡¬ðŸ‡ª
**Cost of living:** $800-$1,400/month
**Digital Nomad Visa:** Remotely from Georgia program
**Internet:** Surprisingly excellent

Tbilisi is Europe's hidden gem. Zero income tax for remote workers, cheap rent, great food, and one of the most welcoming visa programs for remote workers.

## 5. Indonesia (Bali) ðŸ‡®ðŸ‡©
**Cost of living:** $1,000-$1,800/month
**Digital Nomad Visa:** E33G Digital Nomad Visa
**Internet:** Good in tourist areas

Bali has been a nomad paradise for years. Tropical climate, spiritual culture, and an endless stream of coworking spaces and cafes with fast WiFi.

## What to Look For

When choosing your base, consider:
- **Time zone compatibility** with your team
- **Visa regulations** â€” tourist visas have limits
- **Healthcare quality** â€” get travel insurance
- **Internet reliability** â€” test before committing long-term

Find your next remote role on [OpportuAI](/jobs) and start your location-independent journey.
    `,
    category: 'Remote Work Tips',
    author: 'OpportuAI Team',
    readTime: '7 min read',
    publishedAt: '2025-03-10',
    emoji: 'ðŸŒ'
  },
]

export default async function handler(req, res) {
  res.setHeader('Access-Control-Allow-Origin', '*')
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization')
  if (req.method === 'OPTIONS') return res.status(200).end()

  res.setHeader('Cache-Control', 's-maxage=60')

  let posts = [...SEEDED_POSTS]

  try {
    const url = process.env.VITE_SUPABASE_URL
    const key = process.env.VITE_SUPABASE_ANON_KEY
    if (url && key) {
      const { createClient } = await import('@supabase/supabase-js')
      const supabase = createClient(url, key)

      // GET single post by slug
      if (req.method === 'GET' && req.query.slug) {
        const slug = req.query.slug
        const seeded = SEEDED_POSTS.find(p => p.slug === slug)
        if (seeded) return res.status(200).json({ post: seeded })
        const { data } = await supabase.from('blog_posts').select('*').eq('slug', slug).eq('published', true).single()
        if (data) return res.status(200).json({ post: data })
        return res.status(404).json({ error: 'Post not found' })
      }

      // POST â€” create new post (admin)
      if (req.method === 'POST') {
        const { title, slug, content, excerpt, category, emoji, published } = req.body
        const { data, error } = await supabase.from('blog_posts').insert([{ title, slug: slug || title.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, ''), content, excerpt, category, emoji: emoji || 'ðŸ“', author: 'OpportuAI Team', published: published || false, readTime: Math.ceil(content.split(' ').length / 200) + ' min read', publishedAt: new Date().toISOString() }]).select().single()
        if (error) return res.status(500).json({ error: error.message })
        return res.status(200).json({ post: data })
      }

      // PUT â€” update post (admin)
      if (req.method === 'PUT') {
        const { id, ...updates } = req.body
        const { data, error } = await supabase.from('blog_posts').update(updates).eq('id', id).select().single()
        if (error) return res.status(500).json({ error: error.message })
        return res.status(200).json({ post: data })
      }

      // GET all â€” merge seeded + DB posts
      const { data } = await supabase.from('blog_posts').select('*').eq('published', true).order('publishedAt', { ascending: false })
      if (data && data.length > 0) posts = [...data, ...posts]
    }
  } catch (e) { /* serve seeded only */ }

  // Return all posts (no slug query)
  const category = req.query?.category
  if (category) posts = posts.filter(p => p.category === category)
  res.status(200).json({ posts })
}
